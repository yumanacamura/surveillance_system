# サーバ監視システム
サーバへのpingによる監視ログファイルからサーバの故障を検出します。

ログはping1回に付き1行で、以下のフォーマットに従います。
```
<確認時刻>,<サーバアドレス>,<応答結果>
```
確認時刻はYYYYMMDDhhmmss、サーバアドレスはネットワークプレフィックス長付きのIPv4アドレスです。
応答結果はpingの応答時間[ms]で、タイムアウトした際は"-"(ハイフン)を記述してください。

## 実行方法
Xは必要な機能に応じて1-4の数値を入れてください
```
python3 src/probX.py
```
実行後、プログラムの指示に従って下記パラメータを入力してください
- 監視ログファイルのパス
- 故障と判定するまでのタイムアウト回数(prob2,3,4のみ)
- サーバが過負荷と判定する平均応答時間(prob3,4のみ)
- 平均応答時間を求める際に使用する応答数(prob3,4のみ)

## 各ファイルの内容

### src
<dl>
  <dt>prob1.py</dt>
  <dd>サーバの故障を検出するプログラム</dd>
  <dt>prob2.py</dt>
  <dd>prob1.pyに故障と判定するまでのタイムアウト回数を指定する機能を追加したプログラム</dd>
  <dt>prob3.py</dt>
  <dd>prob2.pyにサーバの過負荷を検出する機能を追加したプログラム</dd>
  <dt>prob4.py</dt>
  <dd>prob3.pyにサブネットの故障を検出する機能を追加したプログラム
  </dd>
  <dt>util/to_datetime.py</dt>
  <dd>ログファイルから入力される時刻をdatetime型に変換するプログラム
  </dd>  
</dl>

### test
<dl>
  <dt>test_probX.py</dt>
  <dd>src/probX.pyのテストを行うプログラム</dd>
  <dt>data/probX-Y.txt</dt>
  <dd>src/probX.pyのテストを行う際に使用するY個目のテストデータ</dd>
  <dd>ログファイルの中身・期待されるプログラムの出力・プログラムの実行後に入力するパラメータが空行区切りで記述されている</dd>
  </dd>
</dl>

## テストの実行
Xはテストしたいプログラムに応じて1-4の数値を入れてください
```
python3 test/test_probX.py
```
